* DONE Expandability via xparse is only needed for the user-level style macros, not for .bbl reading macros.
* DONE Need to search for internal direct calls of \blx@bbl@{field,list,name}def and add necessary args?
* DONE Need to search for internal direct calls of \blx@bbl@addfield and add necessary args?
* DONE What about \blx@bbl@addentryfield and its calls?
* DONE Macros to alter
** DONE \blx@imc@docsvfield
** DONE \blx@imc@forcsvfield
** DONE \blx@imc@thefield
** DONE \blx@imc@thelist
** DONE \blx@imc@thename
** DONE \blx@imc@strfield
** DONE \blx@imc@usefield
** DONE \blx@imc@clearfield
** DONE \blx@imc@clearlist
** DONE \blx@imc@clearname
** DONE \blx@savefield
** DONE \blx@savefieldcs
** DONE \blx@savelist
** DONE \blx@savelistcs
** DONE \blx@savename
** DONE \blx@savenamecs
** DONE \blx@imc@restorefield
** DONE \blx@imc@restorelist
** DONE \blx@imc@restorename
** DONE \blx@imc@iffieldundef
** DONE \blx@imc@iflistundef
** DONE \blx@imc@ifnameundef
** DONE \blx@imc@iffieldsequal
** DONE \blx@imc@iflistsequal
** DONE \blx@imc@ifnamesequal
** DONE \blx@imc@iffieldequals
** DONE \blx@imc@iflistequals
** DONE \blx@imc@ifnameequals
** DONE \blx@imc@iffieldequalcs
** DONE \blx@imc@iflistequalcs
** DONE \blx@imc@ifnameequalcs
** DONE \blx@imc@iffieldequalstr
** DONE \blx@iffieldxref
** DONE \blx@iflistxref
** DONE \blx@ifnamexref
** DONE \blx@imc@iffieldint
** DONE \blx@imc@iffieldnum
** DONE \blx@imc@iffieldnums
** DONE \blx@imc@iffieldpages
** DONE \ifcurrentfield/list/name - \currentfield and \currentform and \currentlang?
** DONE \blx@imc@printfield
** DONE \blx@imc@printlist
** DONE \blx@imc@printname
** DONE \blx@imc@indexfield
** DONE \blx@imc@indexlist
** DONE \blx@imc@indexname
** DONE \blx@imc@iffieldbibstring
** DONE \blx@listsetup
** DONE \blx@namesetup
** DONE \blx@namesetup@i
** DONE \blx@reencode
** DONE \blx@bbl@titles
** DONE \citename
** DONE \citelist
** DONE \citefield
** DONE \blx@citexpunct
* DONE NOTES
** DONE Need to turn off redef warnings for xparse
** DONE Need warning for form/lang variants of lists/names with different listtotals (in biber)
** DONE index isn't creating everything yet? Check against 1.5 or bibtex
** DONE replace listargsl with listargs
** DONE when done check all occurrences of abx@{field,list,name@}
** DONE @TE stuff - when done, do we still need ifbibfieldms (probably).
** DONE How do the changed macros fare in etoolbox boolean tests?
** DONE If names aren't multiscript in custom data models, they are undef
** DONE Some problem with related fields - clear* are clearing global
** DONE form/lang should be global and per-entry, passed in bcf. Then biber uses the active form/lang and only omits these for .bbl when the same.
** DONE What does the language field do? clearlang? (standard.bbx prints the LANGUAGE field - that's what these macros are for - irrelevant for ms)
** DONE Changed names of form/lang things breaks apa test
** DONE getlang - needs counters for abx@forms@<field> and abx@langs@<field>@<form> - shouldn't be global as it's per entry?
** DONE Make new form/lang counters public (how to do langs per form counter (needs arg)?)
** DONE Need \multiscriptlang which is initialised from blx@languagename and overriden by per-entry multiscriptlang
** DONE Same for \multiscriptform - should be overridden per-entry
** DONE Fix foreignlang - breaks APA test due to unexpanded second arg
** DONE Convert unecessary DeclareExpandable... and run APA test
** DONE Conditionalise default lang on translation form - in such case it should default to \blx@mstranslang - everywhere?
** DONE Should we default to blx@languagename? This means you can't \printx[][form=translated]{} and pick up an arbitrary translated form
** DONE hyphenation field name change to langid, alias using Sourcemap/bibtex fix
** DONE babel option name change (autolang)
** DONE Seems to be somewhere where \endgroup is being missed with language=auto*
** DONE langidopts seems to not be reset, next entry with no langidopts when using autolang=langname re-uses last field which might not be right (variant= in german, for example)
** DONE indexfield \foreignlanguage doesn't seem to do the right thing with shorthands in the .idx? Not possible. Makeindex would have to understand language switching macros and it doesn't.
** DONE sourcemap on ms fields?
** DONE inheritance ms + tests in biber and biblatex
* TODO Documentation
** DONE Variant enabled fields. Combination of form/lang is a variant
** DONE vform and vlang are global and per-entry. vlang defaults to babel/polyglossia setting or global language option. vform to "original"
** DONE vtranslang is global and per-entry., defaults in same way as vlang
** DONE Did I mention why it doesn't make sense to variant related functionality? Related functionality is in some cases an alternative to variants (translated as etc.). There is no internals need to variant enable it as it is all controlled by styles which would choose particular variants to inherit.
** DONE \DeclareLabel* are variant compatible \field[]{} doc needs enhancing.
** DONE Biber makes sure that lang isn't present as option for bibfields where the lang matches vlang
** TODO Sorting/Inheritance macros are variant enabled
** TODO fieldsourceform, fieldsourcetarget options in sourcemap
** DONE In RELEASE - incompatible change - language=auto -> language=autobib for styles which set this
** DONE LANGID field also sets per-entry default variant lang
** TODO Babel/Poly adjusts to lang of fields using autolangshort environment (hyphens, shorthands, extras, just hyphens if lang isn't loaded)
** TODO field and field_x_y - where x and y are defaults - overwrite
** TODO \cite* forms/langs are determined by \DeclareLabelalphaTemplate, \DeclareLabelname and \DeclareLabeltile. Need to declare a new cite command with appropriate form/lang in \print* for others
** TODO clear* are special loops
** TODO save* are special loops, (\macro<form><lang>)
** TODO restore* are special loops, (\macro<form><lang>)
** TODO DM needs documenting so people can tell what variant enabled fields are (just add marker to fields in doc)
** TODO \if{field,list,name}sequal are special - doc how
** TODO indextitle doc - copies \blx@multiscriptform/\blx@languagename to indextitle
** TODO \iffieldint doesn't work in \ifthenelse and never did (ok in \ifboolexpr+test)
** TODO \ifbibfieldform{bibfield}{<form>} (if there is a <form> for bibfield?)
** TODO \ifbibfieldlang{bibfield}{<form> or nothing}{<lang>} (if there is a <lang> for <form> for bibfield?)
** TODO \ifbibfieldv{bibfield} - is a MS field?
** TODO \ifbibfieldvariants (Are there any forms/langs variants other than orig_default for bibfield?)
** TODO \loopforms, \looplangs, \loopformlangs and \loopvariants (loop over all forms/langs doing macro for each)
** TODO \getlang
** TODO \formcount, \langcount, \formlangcount (all in formats, latter uses selected form)
** TODO form in \sortitem in biber too
** TODO \MakeSentenceCase uses lang for field if found, then LANGID field.
** TODO \printfield obeys shortlang opt settings, printlist, name don't (no point)

