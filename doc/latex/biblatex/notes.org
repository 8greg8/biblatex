* Abstract LOS
** http://tex.stackexchxange.com/questions/29122/how-to-get-abbreviations-of-the-bibliography-into-the-list-of-shorthands
** DONE shorthand occurs a lot in biblatex.def
** DONE search for "los"
** DONE skiplos option (in biber too) -> skipbiblist
** DONE Need to make the name of the biblist available in .bcf so it can be arg to \sortlist. label->sortscheme, add listname
** DONE 938 - \blx@warn@losempty needs changing
** DONE 5659 - sortscheme names for shorthands needs generalising
** DONE 5712/5716 - Where shorthand sortschemes are checked
** DONE 5800 - def of \key. @shorthand@ to @#1@ so that type of sortlist is actually used.
** DONE 5893 - bibenv def for shorthands
** DONE 5984 - Start of \printshorthands options. This needs to be generalised
** DONE 6687 - def of \printshorthands
** DONE skipbiblist calls \blx@bbl@shorthand which isn't relevant in general any more
** DONE 9906 - Message needs changing in deprecation of sortlos
** DONE skiplos option needs warning to skipbiblist
** DONE \blx@xml@slist and \blx@xml@slistlos can probably be combined
** DONE \blx@defbibstrings has los stuff hard-coded in (losname which is also in biblatex.def. Probably need legacy aliad for losname)
** DONE Big comment block
** DONE Missing sortscheme should default to global, if same named does not exist
** DONE Add label to biber test .bcfs
** DONE document label attr in datamodel macros
** DONE doc of \printshorthand throughout doc
** DONE \AtBeginShorthands/\AtEveryLositem are legacy aliases - document \AtBeginBiblist/\AtEveryBiblistItem
** DONE Document \DeclareBiblistFilter and compare with \defbibfilter. You do want to filter biblists at source
** DONE Document that sorting scheme for biblists defaults to biblist name, then global.
** DONE Document incompatible change of bib env shorthands->shorthand and driver shorthands->shorthand
** DONE document default for bibheading is "biblist" which uses \biblistname macro
** DONE refs to \DeclareBiblistFilter (ZZ)
* omitnumbers generally will make numeric-comp.cbx die because it needs labelnumber to exist for some tests. This is not really a bug.
* DONE Expandability via xparse is only needed for the user-level style macros, not for .bbl reading macros.
* DONE Need to search for internal direct calls of \blx@bbl@{field,list,name}def and add necessary args?
* DONE Need to search for internal direct calls of \blx@bbl@addfield and add necessary args?
* DONE What about \blx@bbl@addentryfield and its calls?
* DONE Macros to alter
** DONE \blx@imc@docsvfield
** DONE \blx@imc@forcsvfield
** DONE \blx@imc@thefield
** DONE \blx@imc@thelist
** DONE \blx@imc@thename
** DONE \blx@imc@strfield
** DONE \blx@imc@usefield
** DONE \blx@imc@clearfield
** DONE \blx@imc@clearlist
** DONE \blx@imc@clearname
** DONE \blx@savefield
** DONE \blx@savefieldcs
** DONE \blx@savelist
** DONE \blx@savelistcs
** DONE \blx@savename
** DONE \blx@savenamecs
** DONE \blx@imc@restorefield
** DONE \blx@imc@restorelist
** DONE \blx@imc@restorename
** DONE \blx@imc@iffieldundef
** DONE \blx@imc@iflistundef
** DONE \blx@imc@ifnameundef
** DONE \blx@imc@iffieldsequal
** DONE \blx@imc@iflistsequal
** DONE \blx@imc@ifnamesequal
** DONE \blx@imc@iffieldequals
** DONE \blx@imc@iflistequals
** DONE \blx@imc@ifnameequals
** DONE \blx@imc@iffieldequalcs
** DONE \blx@imc@iflistequalcs
** DONE \blx@imc@ifnameequalcs
** DONE \blx@imc@iffieldequalstr
** DONE \blx@iffieldxref
** DONE \blx@iflistxref
** DONE \blx@ifnamexref
** DONE \blx@imc@iffieldint
** DONE \blx@imc@iffieldnum
** DONE \blx@imc@iffieldnums
** DONE \blx@imc@iffieldpages
** DONE \ifcurrentfield/list/name - \currentfield and \currentform and \currentlang?
** DONE \blx@imc@printfield
** DONE \blx@imc@printlist
** DONE \blx@imc@printname
** DONE \blx@imc@indexfield
** DONE \blx@imc@indexlist
** DONE \blx@imc@indexname
** DONE \blx@imc@iffieldbibstring
** DONE \blx@listsetup
** DONE \blx@namesetup
** DONE \blx@namesetup@i
** DONE \blx@reencode
** DONE \blx@bbl@titles
** DONE \citename
** DONE \citelist
** DONE \citefield
** DONE \blx@citexpunct
* DONE NOTES
** DONE Need to turn off redef warnings for xparse
** DONE Need warning for form/lang variants of lists/names with different listtotals (in biber)
** DONE index isn't creating everything yet? Check against 1.5 or bibtex
** DONE replace listargsl with listargs
** DONE when done check all occurrences of abx@{field,list,name@}
** DONE @TE stuff - when done, do we still need ifbibfieldms (probably).
** DONE How do the changed macros fare in etoolbox boolean tests?
** DONE If names aren't multiscript in custom data models, they are undef
** DONE Some problem with related fields - clear* are clearing global
** DONE form/lang should be global and per-entry, passed in bcf. Then biber uses the active form/lang and only omits these for .bbl when the same.
** DONE What does the language field do? clearlang? (standard.bbx prints the LANGUAGE field - that's what these macros are for - irrelevant for ms)
** DONE Changed names of form/lang things breaks apa test
** DONE getlang - needs counters for abx@forms@<field> and abx@langs@<field>@<form> - shouldn't be global as it's per entry?
** DONE Make new form/lang counters public (how to do langs per form counter (needs arg)?)
** DONE Need \multiscriptlang which is initialised from blx@languagename and overriden by per-entry multiscriptlang
** DONE Same for \multiscriptform - should be overridden per-entry
** DONE Fix foreignlang - breaks APA test due to unexpanded second arg
** DONE Convert unecessary DeclareExpandable... and run APA test
** DONE Conditionalise default lang on translation form - in such case it should default to \blx@mstranslang - everywhere?
** DONE Should we default to blx@languagename? This means you can't \printx[][form=translated]{} and pick up an arbitrary translated form
** DONE hyphenation field name change to langid, alias using Sourcemap/bibtex fix
** DONE babel option name change (autolang)
** DONE Seems to be somewhere where \endgroup is being missed with language=auto*
** DONE langidopts seems to not be reset, next entry with no langidopts when using autolang=langname re-uses last field which might not be right (variant= in german, for example)
** DONE indexfield \foreignlanguage doesn't seem to do the right thing with shorthands in the .idx? Not possible. Makeindex would have to understand language switching macros and it doesn't.
** DONE sourcemap on ms fields?
** DONE inheritance ms + tests in biber and biblatex
** DONE per-variant lang and strings switching for lists and names
* DONE Documentation
** DONE Variant enabled fields. Combination of form/lang is a variant
** DONE vform and vlang are global and per-entry. vlang defaults to babel/polyglossia setting or global language option. vform to "original"
** DONE vtranslang is global and per-entry., defaults in same way as vlang
** DONE Did I mention why it doesn't make sense to variant related functionality? Related functionality is in some cases an alternative to variants (translated as etc.). There is no internals need to variant enable it as it is all controlled by styles which would choose particular variants to inherit.
** DONE \DeclareLabel* are variant compatible \field[]{} doc needs enhancing.
** DONE Biber makes sure that lang isn't present as option for bibfields where the lang matches vlang
** DONE Sorting/Inheritance/Sourcemap macros are variant enabled
** DONE In RELEASE - incompatible change - language=auto -> language=autobib for styles which set this
** DONE LANGID field also sets per-entry default variant lang
** DONE \printfield, \printlist, \printnames obeys autotlangshort and autolangshortstring opt settings
** DONE \citelist, \citefield, \citename
** DONE field and field_x_y - where x and y are defaults - overwrite
** DONE relevant \cite* forms/langs are determined by \DeclareLabelalphaTemplate, \DeclareLabelname and \DeclareLabeltile. Need to declare a new cite command with appropriate form/lang for \print* in the macro def for others
** DONE clear* are special loops
** DONE save* are special loops, (\macro<form><lang>)
** DONE restore* are special loops, (\macro<form><lang>)
** DONE DM needs documenting so people can tell what variant enabled fields are (just add marker to fields in doc)
** DONE \if{field,list,name}sequal are special - doc how
** DONE All \if* macros ...
** DONE indextitle doc - copies \blx@vform/\blx@languagename to indextitle
** DONE \iffieldint doesn't work in \ifthenelse and never did (ok in \ifboolexpr+test)
** DONE \ifbibfieldform{bibfield}{<form>} (if there is a <form> for bibfield?)
** DONE \ifbibfieldlang{bibfield}{<form> or nothing}{<lang>} (if there is a <lang> for <form> for bibfield?)
** DONE \ifbibfieldv{bibfield} - is a MS field?
** DONE \ifbibfieldvariants (Are there any forms/langs variants other than orig_default for bibfield?)
** DONE \loopforms, \loopformlangs and \loopvariants (loop over all forms/langs doing macro for each)
** DONE \getlang
** DONE \formcount, \langcount, \formlangcount (all in formats, latter uses selected form)
** DONE \MakeSentenceCase uses lang for field if found, then LANGID field.
** DONE Abstract LOS http://tex.stackexchange.com/questions/29122/how-to-get-abbreviations-of-the-bibliography-into-the-list-of-shorthands



** DONE msmode needs to be passed to biber and fallback processing turned off
** TODO msmode needs outputting in types in .bcf, rnc needs changing

Problem
-------
There are the things which can vary between sort lists and which therefore
depend on sorting:

sortinit
sortinithash
extrayear
extratitle
extratitleyear
extraalpha
numeric label numbering in numeric styles

None of these can be used to generate sorting information otherwise there
would be a circular dependency.

When context includes language vform and lang, more things will be
influenced by context and therefore need instantiating per-list like the
extra* fields. In general, anything which is dependent on the ref context
(sorting, language settings) cannot generate the context. If context is:

* Sorting
* vform setting
* vlang setting

this effectively means that the sorting-dependent things cannot be sorted
on since biber does not "generate" vform/vlang anyway.

What depends on context in ms? Everything?
Do labeltitle, labelname etc. need to have form/lang?
